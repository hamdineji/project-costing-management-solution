<div class="row" style="margin-bottom: 0.5rem;"  *ifPermission='["seeAllTasks"]' >
<div class="col-sm-5">
</div>
<div class="col-sm-3">
    <nb-select name="select" placeholder="select Task by User" style="width:15rem" size="small" (selectedChange)="selectUserFilter($event)">
        <nb-option  [value]="0">All Tasks </nb-option>
        <nb-option *ngFor="let item of allUsers" [value]="item.id">{{item.name}} </nb-option>
    </nb-select>
</div> 
<nb-select name="select" placeholder="select Task by Project" style="width:15rem" size="small" (selectedChange)="selectProjectFilter($event)">
    <nb-option  [value]="0">All Tasks </nb-option>
    <nb-option *ngFor="let item of allProjects" [value]="item.id">{{item.name}} </nb-option>
</nb-select>
</div>
<div class="row" *ifPermission='["seeAllTasks"]'>
<div class="col-sm-4">
    <nb-card class="Listclass " size="medium">
        <nb-card-header class="cardHeader">
            <div class="row">
                <div class="col-sm-10">
                    Todo 
                </div>
            <nb-icon icon="bulb-outline" style="color: crimson;"></nb-icon>
            </div>
            
          </nb-card-header>
          <nb-card-body>
            <div *ngFor="let task of allnewTasks">
                <nb-card (click)="showTaskDetails(task)" [nbPopover]="popoverTaskTemplate" >
                <nb-card-header>
                    <div class="row">
                        <div class="col-sm-4">
                            <nb-user
                                picture = "assets/images/{{task.user.image}}"
                             name = "{{task.user.name}}"></nb-user>
                        </div>
                        <div class="col-sm-4">
                            {{ task.project.name}} 
                        </div>
                        <div class="col-sm-2" style="text-align: center;">
                            {{getDate(task.endDate)}}
                        </div>
                    </div>
                </nb-card-header>
            </nb-card>
            </div>
           </nb-card-body>
    </nb-card>
</div>
<div class="col-sm-4">
    <nb-card class="Listclass " size="medium">
        <nb-card-header  class="cardHeader">
            <div class="row">
                <div class="col-sm-10">
                   Doing
                </div>
                <nb-icon icon="activity-outline" style="color: mediumseagreen;"></nb-icon>
            </div>          
        </nb-card-header>
        <nb-card-body>
            <div *ngFor="let task of allInprogressTasks">
                <nb-card (click)="showTaskDetails(task)" [nbPopover]="popoverTaskTemplate" >
                <nb-card-header>
                    <div class="row">
                        <div class="col-sm-4">
                            <nb-user
                                picture = "assets/images/{{task.user.image}}"
                             name = "{{task.user.name}}"></nb-user>
                        </div>
                        <div class="col-sm-4">
                            {{ task.project.name}} 
                        </div>
                        <div class="col-sm-2" style="text-align: center;">
                            {{getDate(task.endDate)}}
                        </div>
                    </div>
                </nb-card-header>
            </nb-card>
            </div>
           </nb-card-body>
    </nb-card>
</div>
<div class="col-sm-4">
    <nb-card class="Listclass " size="medium">
        <nb-card-header class="cardHeader">
            <div class="row">
                <div class="col-sm-10">
                    done 
                </div>
                <nb-icon icon="checkmark-outline" style="color: darkblue;"></nb-icon>
            </div>          </nb-card-header>
       <nb-card-body>
        <div *ngFor="let task of alldoneTasks">
            <nb-card (click)="showTaskDetails(task)" [nbPopover]="popoverTaskTemplate" >
            <nb-card-header>
                <div class="row">
                    <div class="col-sm-4">
                        <nb-user
                            picture = "assets/images/{{task.user.image}}"
                         name = "{{task.user.name}}"></nb-user>
                    </div>
                    <div class="col-sm-4">
                        {{ task.project.name}} 
                    </div>
                    <div class="col-sm-2" style="text-align: center;">
                        {{getDate(task.endDate)}}
                    </div>
                </div>
            </nb-card-header>
        </nb-card>
        </div>
       </nb-card-body>
    </nb-card>
</div>
</div>
<div class="row" style="margin-bottom: 0.5rem;" *ifDepartementPermission='["seeAllTasks"]'>
    <div class="col-sm-8">
    </div>
    <nb-select name="select" placeholder="select Task by Project" style="width:15rem" size="small" (selectedChange)="selectUserProjectFilter($event)">
        <nb-option  [value]="0">All Tasks </nb-option>
        <nb-option *ngFor="let item of allProjects" [value]="item.id">{{item.name}} </nb-option>
    </nb-select>
    </div>
<div class="row" *ifDepartementPermission='["seeAllTasks"]' >
    <div class="col-sm-4">
        <nb-card class="Listclass " size="medium">
            <nb-card-header class="cardHeader">
                <div class="row">
                    <div class="col-sm-10">
                        Todo List
                    </div>
                <nb-icon icon="bulb-outline" style="color: crimson;"></nb-icon>
                </div>  
              </nb-card-header>
              <nb-card-body>
                <div *ngFor="let task of usernewTasks">
                    <nb-card>
                    <nb-card-header>
                        <div class="row">
                            <div class="col-sm-8">
                                {{ task.project.name}} 
                            </div>
                            <div class="col-sm-2" style="text-align: center;">
                               <p>{{getDate(task.endDate)}}</p> 
                            </div>
                        </div>
                    </nb-card-header>
                </nb-card>
                </div>
               </nb-card-body>
        </nb-card>
    </div>
    <div class="col-sm-4">
        <nb-card class="Listclass " size="medium">
            <nb-card-header  class="cardHeader">
                <div class="row">
                    <div class="col-sm-10">
                        in progress List
                    </div>
                    <nb-icon icon="activity-outline" style="color: mediumseagreen;"></nb-icon>
                </div>          
            </nb-card-header>
            <nb-card-body>
                <div *ngFor="let task of userInprogressTasks">
                    <nb-card>
                    <nb-card-header>
                        <div class="row">
                            <div class="col-sm-8">
                                {{ task.project.name}} 
                            </div>
                            <div class="col-sm-2" style="text-align: center;">
                                {{getDate(task.endDate)}}
                            </div>
                        </div>
                    </nb-card-header>
                </nb-card>
                </div>
               </nb-card-body>
        </nb-card>
    </div>
    <div class="col-sm-4">
        <nb-card class="Listclass " size="medium">
            <nb-card-header class="cardHeader">
                <div class="row">
                    <div class="col-sm-10">
                        done List
                    </div>
                    <nb-icon icon="checkmark-outline" style="color: darkblue;"></nb-icon>
                </div>          </nb-card-header>
           <nb-card-body>
            <div *ngFor="let task of userdoneTasks">
                <nb-card>
                <nb-card-header>
                    <div class="row">
                        <div class="col-sm-8">
                            {{ task.project.name}} 
                        </div>
                        <div class="col-sm-2" style="text-align: center;">
                            {{getDate(task.endDate)}}
                        </div>
                    </div>
                </nb-card-header>
            </nb-card>
            </div>
           </nb-card-body>
        </nb-card>
    </div>
    </div>
<ng-template #popoverTaskTemplate >
    <nb-card>
        <nb-card-header style="background-color: bisque;">
            <div class="row">
                Task Details
            </div>
        </nb-card-header>
    <table class="table">
    <tr>
        <th>
            description
        </th>
        <td>
            {{taskDetails.description}}
        </td>
    </tr>
    <tr>
        <th>
            status
        </th>
        <td>
            {{taskDetails.status}}
        </td>
    </tr>
    <tr>
        <th>
            dateRaised
        </th>
        <td>
            {{getDate(taskDetails.dateRaised)}}
        </td>
    </tr>
    <tr>
        <th>
            start date
        </th>
        <td>
            {{getDate(taskDetails.startDate)}}
        </td>
    </tr>
    <tr>
        <th>
            end date
        </th>
        <td>
            {{getDate(taskDetails.endDate)}}
        </td>
    </tr>
    </table>
    </nb-card>
</ng-template>